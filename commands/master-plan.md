# Master Plan - 互動式專案規劃協作

為軟體開發專案提供**互動式專案規劃協作**，透過 AI 與 User 的深度對話，確保核心用戶故事正確理解，並生成高品質的專案總覽計畫書。

**🚨 核心理念**: 此命令專注於**互動協作**，不是單純文檔生成。AI 必須主動提問、確認需求、搜尋資料，與 User 共同打造精準的專案規劃。

## 使用方式
```bash
/master-plan "專案描述" [可選：PROMPT檔案路徑]
```

## 🎯 Master Plan 互動協作定位

### **主要受眾**
- **核心受眾**: AI (Claude) 和 User (你) 的協作對話
- **最終受眾**: 專案執行者、後續 Phase 的 AI 角色、專案決策者

### **核心價值**
- **需求理解確認**: 透過互動對話確保 AI 正確理解用戶真正的需求和痛點
- **用戶故事驗證**: 共同確認核心用戶故事的準確性和完整性
- **知識補強**: AI 主動搜尋相關領域知識，豐富專案規劃的深度
- **協作決策**: AI 和 User 共同做出專案方向和執行策略的決策

## 📚 專業知識庫 (強制自動載入)

🚨 **必須按順序載入以下核心文檔：**
1. CLAUDE.md - 基礎行為準則與環境約束
2. session_notes.md - 當前任務狀態

## 🏗️ Master Plan 計畫書標準結構

### **1. Executive Summary** (專案概覽)
- **專案目標**: 明確的專案目標和成功標準
- **核心價值**: 專案為用戶和業務帶來的主要價值
- **技術創新點**: 專案的技術亮點和創新之處
- **複雜度評估**: Simple/Medium/Complex，決定後續執行策略

### **2. 核心用戶故事** (業務需求核心)
- **主要使用場景**:
  - 核心功能的最重要使用方式
  - 典型操作流程和使用者旅程
  - 關鍵業務流程和價值創造點
- **用戶角色識別**:
  - 數據分析師、策略開發者、ML工程師等
  - 各角色的核心需求和使用場景
  - 跨角色協作需求分析
- **業務價值映射**:
  - 每個用戶故事對應的具體業務價值
  - 成功標準和可衡量的結果
  - 優先級分級 (P0-P2)

### **3. 3-Phase 執行總體規劃**
- **Phase 1: SA結構化分析** (系統理解階段)
  - 主導角色：`/sasd`
  - 核心目標：深度系統理解、需求分析、技術可行性評估
  - 預期交付：SA分析文檔 (DFD/ERD/狀態圖/功能分解)
  - 時程估算：依複雜度調整

- **Phase 2: SD結構化設計** (系統設計階段)
  - 主導角色：`/sasd` + Module Expert 協作
  - 核心目標：系統架構設計、技術方案制定、用戶故事細化
  - 預期交付：SD設計文檔 (架構圖/模組結構/程式結構/介面規範)
  - 時程估算：依設計複雜度調整

- **Phase 3: 段落式實作** (功能實現階段)
  - 主導角色：`/impl` + Module Expert
  - 核心目標：分段功能實作、Examples驗證、品質保證
  - 預期交付：可運行的功能實作、完整Examples、測試套件
  - 時程估算：依實作複雜度和分段數量調整

### **4. 現有系統狀況分析**
- **現有功能盤點**: 不能遺漏的既有功能點
- **使用模式分析**: 實際調用方式和數據流
- **技術債務識別**: 當前限制和需要改進的地方
- **整合點分析**: 與現有系統的整合需求和挑戰

### **5. 技術決策框架**
- **架構方向**: 整體技術架構選擇的指導原則
- **技術約束**: 專案的核心技術約束和要求
- **風險評估**: 主要技術風險和緩解策略
- **角色協作**: 需要哪些Module Expert協作和分工

### **6. 里程碑和驗收標準**
- **Phase 1 里程碑**: SA分析完成標準和Review檢查點
- **Phase 2 里程碑**: SD設計完成標準和技術決策確認
- **Phase 3 里程碑**: 功能實作完成標準和Examples驗證
- **最終驗收**: 專案成功的明確定義和衡量標準

## 🤝 互動協作執行流程

### **Step 1: 初步理解與澄清** (必要互動)
- **需求探索提問**:
  - "能否詳細說明這個專案要解決的核心問題？"
  - "目前的痛點和期望的改善效果是什麼？"
  - "誰是主要的使用者？他們的典型工作流程是什麼？"
- **背景知識搜尋**: 根據專案主題搜尋相關領域的最佳實踐
- **複雜度初評**: 與 User 確認專案的技術複雜度和時程期望

### **Step 2: 核心用戶故事協作確認** (深度互動)
- **用戶故事共創**:
  - AI 提出初步用戶故事草案
  - User 提供回饋和修正
  - 反覆討論直到達成共識
- **使用場景驗證**:
  - "這個使用場景是否符合您的實際需求？"
  - "還有哪些重要的使用情境我可能遺漏了？"
  - "各個用戶角色的優先級如何排序？"
- **業務價值確認**:
  - 與 User 共同定義成功標準
  - 確認可衡量的業務指標
  - 討論投資報酬率和風險評估

### **Step 3: 知識補強與資料蒐集** (主動研究)
- **領域知識搜尋**:
  - 搜尋相關技術的最新發展和最佳實踐
  - 了解業界標準和競爭者解決方案
  - 收集相關的開源專案和技術資源
- **技術可行性研究**:
  - 研究類似專案的實作方法和挑戰
  - 評估技術風險和緩解策略
  - 確認技術選型的合理性

### **Step 4: 協作規劃與決策** (共同決策)
- **執行策略討論**:
  - 與 User 討論 3-Phase 執行策略的合理性
  - 確認各階段的里程碑和驗收標準
  - 討論資源分配和時程安排
- **風險評估協作**:
  - 共同識別主要風險點
  - 討論風險緩解策略
  - 確認應急計畫

### **Step 5: Master Plan 共同完善** (迭代改進)
- **文檔協作撰寫**:
  - AI 生成初稿，User 提供回饋
  - 反覆修正直到 User 滿意
  - 確保文檔符合實際需求

## 🚨 專案特定約束模板

### **文檔和計畫書約束範例**
> **注意**: 需根據專案實際文檔結構定義

- **儲存路徑**: 專案文檔的標準儲存位置
- **Markdown格式**: 遵循正確的代碼塊使用規範
- **Mermaid圖表**: 使用Dark Theme相容的圖表設計

## 📋 Master Plan 計畫書品質檢查

### **內容完整性檢查**
- [ ] Executive Summary 包含明確的專案目標和價值
- [ ] 核心用戶故事涵蓋主要使用場景
- [ ] 3-Phase執行規劃具體且可執行
- [ ] 現有系統分析準確且完整
- [ ] 技術決策有明確的理由和約束

### **跨Phase協調性檢查**
- [ ] Phase 1-3 的目標和交付物協調一致
- [ ] 角色分工和責任邊界清晰
- [ ] 風險識別和緩解策略完整

### **實務可執行性檢查**
- [ ] 專案範圍明確且聚焦
- [ ] 技術方案初步可行
- [ ] 後續階段的執行路徑清晰

## 🎯 互動協作必要原則

### **AI 主動責任**
- **🔍 主動提問**: 不能僅基於初始描述就開始規劃，必須主動探索需求細節
- **🌐 資料搜尋**: 遇到不熟悉的領域或技術，主動搜尋最新資訊和最佳實踐
- **✅ 理解確認**: 每個關鍵決策點都要與 User 確認理解正確性
- **🔄 迭代改進**: 根據 User 回饋持續調整和改進規劃內容

### **User 協作責任**
- **💬 詳細回饋**: 提供具體的需求細節、使用場景和期望結果
- **✋ 及時修正**: 發現 AI 理解偏差時主動糾正
- **⭐ 優先級指導**: 明確指出哪些功能最重要、哪些可以延後
- **📋 現實檢查**: 協助評估時程和資源的現實性

## 🔧 協作完成後的輸出

### **最終交付物**
1. **Master Plan 文檔**: 經過充分討論和確認的專案總覽計畫書
2. **核心決策記錄**: 重要決策的理由和背景脈絡
3. **用戶故事確認清單**: 經過驗證的核心用戶故事
4. **後續行動路徑**: 明確的下一步執行指引

### **品質確認檢查**
- [ ] **需求理解**: User 確認 AI 完全理解專案需求和目標
- [ ] **用戶故事**: 核心用戶故事經過充分討論和驗證
- [ ] **技術可行性**: 技術方案經過研究和風險評估
- [ ] **執行計畫**: 3-Phase 執行策略得到 User 認可

### **後續行動指引**
- **協作模式確立**: 根據複雜度決定後續 Phase 的執行方式
- **角色協作規劃**: 明確後續需要哪些專業角色參與
- **里程碑追蹤**: 建立後續進度追蹤和檢查機制

---

**🚨 核心原則**:
- **互動優先**: 絕不能跳過與 User 的深度協作直接生成計畫書
- **確認驅動**: 每個重要決策都要與 User 確認
- **資料驅動**: 主動搜尋相關資料豐富規劃深度
- **品質為本**: 寧可多花時間確認，也不要產出錯誤的規劃
