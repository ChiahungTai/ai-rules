# Design2Prompt - 設計轉 Vibe Coding Prompt 生成器

將 Story Design 或 Execution Plan 的設計文檔轉換為**段落式 Vibe Coding Prompt**，專為與 AI 進行 vibing coding 設計，將複雜的實作計畫轉換為適合對話式編程的 prompt。

## 使用方式
```bash
/design2prompt "設計文檔路徑" --output "prompt-[專案名稱].md"
```

**執行後生成**: `ai-analysis/prompts/prompt-[專案名稱].md` - 包含分段好的 prompt，可直接複製貼上

**🚨 強制輸出**: 自動建立 `ai-analysis/prompts/` 目錄並強制寫入文檔

---

## 🎯 核心概念：Vibe Coding Prompt

### 什麼是 Vibe Coding Prompt？

**🎯 核心定義**：
將設計文檔中的 Self-Contained Segment 轉換為**適合與 AI 對話的 prompt**，每個 prompt 都可以獨立執行 vibing coding。

**📋 Vibe Coding Prompt 特徵**：
- **對話友好**: 自然語言描述，適合 AI 對話互動
- **實作導向**: 包含具體的實作要求和技術細節
- **自包含性**: 每個 prompt 都有足夠的資訊獨立完成
- **vibing 風格**: 保持彈性和創意空間，不過於僵化

### Vibe Coding 的價值

**🚀 核心優勢**：
- **降低認知負擔**: 將複雜設計轉換為易懂的對話 prompt
- **保持設計意圖**: 確保 vibing coding 不偏離原始設計
- **提高互動效率**: 每個 prompt 都可以快速進入實作狀態
- **彈性調整**: 在 vibing 過程中可以根據實際情況調整

---

## 🎭 角色定位與專業範圍

### **適用情境** (何時使用此命令)

**✅ 適用情境**:
- **設計轉實作**: 已完成 design-plan/story-design/execution-plan，需要開始編程
- **Vibe Coding**: 喜歡與 AI 對話式編程的開發風格
- **段落式開發**: 希望分段完成複雜功能
- **互動式實作**: 需要在實作過程中保持彈性和創意

**❌ 不適用情境**:
- **直接實作**: 沒有設計文檔，直接開始編程
- **自動化執行**: 希望 AI 完全自動完成實作
- **文檔生成**: 需要生成設計文檔而非 prompt

---

## 📚 專業知識庫 (強制自動載入)

🚨 **必須按順序載入以下核心文檔**：
1. CLAUDE.md - 基礎行為準則與環境約束
2. 設計文檔 - design-plan.md/story-design.md/execution-plan.md

---

## 🔄 轉換流程

### **設計文檔到 Vibe Prompt 的轉換**

```
設計文檔 (Self-Contained Segment)
         ↓
    意圖分析和重點提取
         ↓
    Vibe Coding 風格轉換
         ↓
    段落式 Prompt 生成
         ↓
    可執行的 Vibe Coding Prompt
```

### **轉換原則**

#### **1. 意圖保持原則**
- 保持原始設計的核心意圖和技術決策
- 轉換對話風格但不改變技術本質
- 確保關鍵約束和品質要求不丟失

#### **2. 對話友好原則**
- 使用自然語言描述，避免過於技術性的術語
- 添加適當的上下文和解釋
- 保持 AI 對話的流暢性和互動性

#### **3. 實作導向原則**
- 明確指出需要實現的功能和介面
- 提供足夠的技術細節指導實作
- 包含驗證和測試的具體要求

#### **4. 彈性保留原則**
- 保持適當的實作彈性，不過於詳細規定
- 允許 AI 在實作過程中發揮創意
- 提供調整和優化的建議空間

---

## 🏗️ Vibe Prompt 設計標準

### **每個 Vibe Prompt 必須包含的要素**

#### **1. 開場對話 (Opening)**
```markdown
嘿！我想要跟你一起實作一個 [功能描述] 的功能。這是一個 [簡要背景] 的專案，我們需要 [核心目標]。
```

#### **2. 設計意圖說明 (Context)**
```markdown
## 🎯 這次實作的設計意圖
根據我們的設計分析，這個功能需要解決 [業務問題]。主要的技術考量是：

- **關鍵需求**: [具體需求描述]
- **技術約束**: [重要的技術限制]
- **整合要點**: [與現有系統的整合方式]
```

#### **3. 實作要求 (Implementation Requirements)**
```markdown
## 🛠️ 實作重點
我們需要實現以下核心組件：

### 主要類別設計
```python
# 簡化的類別結構，保持實作彈性
class CoreComponent:
    """
    設計意圖說明...
    """
    def __init__(self, config):
        # 實作初始化邏輯
        pass

    def main_method(self, params):
        # 實作核心功能
        pass
```

### 關鍵功能要求
1. [功能要求1，保持適當彈性]
2. [功能要求2，明確但不过于详细]
3. [功能要求3，提供實作指引]

### 技術約束
- 必須使用 [技術棧/框架]
- 遵循 [編碼規範]
- 整合現有的 [模組/系統]
```

#### **4. 實作風格指引 (Vibe Style Guide)**
```markdown
## 🎨 實作風格
- **保持彈性**: 如果覺得設計可以更好，隨時提出建議
- **專注核心**: 先實現核心功能，細節可以後續優化
- **持續對話**: 過程中有任何問題或想法，隨時討論
- **品質優先**: 確保程式碼的可靠性和可維護性
```

#### **5. 驗證和下一步 (Validation & Next Steps)**
```markdown
## ✅ 驗證方式
完成後，我們可以透過以下方式驗證：
1. 執行 [測試方法]
2. 檢查 [驗證重點]
3. 整合測試 [整合方式]

## 🚀 下一步計畫
這個功能完成後，接下來我們會實作 [後續功能]，它會 [關聯說明]。
```

---

## 🔧 轉換範例

### **Execution Plan 轉 Vibe Prompt**

#### **原始 Execution Plan 段落**
```markdown
### 段落 1: 用戶認證組件
#### Context
基於 Story Design SD3 的架構設計，實現用戶認證核心功能...

#### 核心實作要點
- AuthManager 類別
- JWT token 管理
- 密碼加密驗證

#### 程式碼框架
```python
class AuthManager:
    def __init__(self, config):
        pass
    def authenticate(self, username, password):
        pass
```
```

#### **轉換後的 Vibe Prompt**
```markdown
嘿！我想要跟你一起實作用戶認證系統的核心功能。這是一個電商平台的專案，我們需要建立一個安全可靠的認證機制。

## 🎯 這次實作的設計意圖
根據我們的設計分析，這個認證系統需要解決用戶安全登入的問題。主要的技術考量是：

- **關鍵需求**: 支援使用者名稱密碼登入，產生 JWT token，確保密碼安全存儲
- **技術約束**: 必須使用 bcrypt 加密，JWT token 有效期管理
- **整合要點**: 與現有的用戶管理系統整合，提供標準化 API

## 🛠️ 實作重點
我們需要實現以下核心組件：

### 主要類別設計
```python
# 認證管理器的核心結構
class AuthManager:
    """
    統一處理用戶認證，包含登入驗證、token 生成和管理
    """
    def __init__(self, config):
        # 設定加密配置、token 密鑰等
        pass

    def authenticate(self, username, password):
        # 驗證用戶身份，成功則回傳 JWT token
        pass

    def verify_token(self, token):
        # 驗證 token 有效性，回傳用戶資訊
        pass
```

### 關鍵功能要求
1. **密碼安全**: 使用 bcrypt 進行密碼哈希和驗證
2. **JWT 管理**: 產生和驗證 JWT token，包含適當的过期時間
3. **錯誤處理**: 提供清晰的錯誤訊息和安全回應

### 技術約束
- 使用 bcrypt 進行密碼加密
- JWT token 需要包含用戶 ID 和过期時間
- 整合現有的 User 資料庫模型

## 🎨 實作風格
- **保持彈性**: 如果有更好的安全實作方式，隨時提出建議
- **專注核心**: 先實現基本的認證功能，其他功能（如重設密碼）可以後續加入
- **持續對話**: 過程中有任何安全考量的問題，我們一起討論
- **品質優先**: 確保程式碼的安全性和可維護性

## ✅ 驗證方式
完成後，我們可以透過以下方式驗證：
1. 建立測試用戶並執行登入流程
2. 檢查 JWT token 的產生和驗證
3. 測試錯誤情況的處理（如錯誤密碼）

## 🚀 下一步計畫
這個認證系統完成後，接下來我們會實作權限管理系統，它會基於這個認證系統來控制用戶存取權限。

準備好了嗎？讓我們開始實作吧！
```

---

## 📋 Vibe Prompt 段落劃分策略

### **段落劃分原則**

#### **1. 功能完整性**
每個 Vibe Prompt 都應該是一個完整的功能單元：
- 可以獨立完成實作和測試
- 有明確的輸入和輸出
- 提供具體的業務價值

#### **2. 對話適當性**
- 保持對話的流暢性，避免過於複雜的技術描述
- 適當的資訊密度，不會讓 AI 感到overwhelming
- 保持互動性和彈性

#### **3. 依賴清晰性**
- 明確標示與其他功能的依賴關係
- 必要的依賴在 prompt 中提供足夠資訊
- 清楚定義整合點和介面

#### **4. 實作可行性**
- 每個 prompt 都有明確的實作路徑
- 提供足夠但不过度的技術細節
- 有開始和結束的明確標誌

---

## 🔧 輸出格式

### **生成的 prompt_XXX.md 文檔結構**

**檔案命名**: `prompt_[專案名稱].md`

```markdown
---
# 📋 Prompt 總覽 - [專案名稱]
**來源設計**: [設計文檔名稱]
**段落數量**: [N] 段
**使用方式**: 按順序複製貼上每段 prompt 與 AI 對話

---

## 🚀 Prompt 1: [標題] - [功能簡述]
---
[直接複製貼上的第一段完整 prompt 內容]

---

## 🚀 Prompt 2: [標題] - [功能簡述]
---
[直接複製貼上的第二段完整 prompt 內容]

---

## 🚀 Prompt 3: [標題] - [功能簡述]
---
[直接複製貼上的第三段完整 prompt 內容]
```

### **設計特點**
- **即用格式**: 每段 prompt 都用 `---` 分隔，方便識別邊界
- **直接複製**: 不需要額外編輯，直接複製每段即可使用
- **清識標記**: 每段都有明確標題和功能簡述
- **執行順序**: 按照編號順序執行，確保依賴關係正確

---

## 🔧 品質檢查

### Vibe Prompt 品質標準
每個生成的 prompt 都需要通過以下檢查：

```markdown
## Vibe Prompt 檢查清單
- [ ] 對話友好：使用自然語言，適合 AI 對話
- [ ] 意圖保持：準確傳達原始設計意圖
- [ ] 實作導向：明確的實作要求和技术細節
- [ ] 彈性保留：保持適當的實作彈性
- [ ] 功能完整：每個 prompt 都是完整的功能單元
- [ ] 驗證明確：包含清楚的驗證方式和成功標準
- [ ] 脈絡清晰：與整體專案的關聯性明確
```

---

## 🚀 使用流程

### **完整的使用流程**

```
1. 完成設計階段
   design-plan/story-design/execution-plan
         ↓
2. 生成 prompt_XXX.md
   /design2prompt "設計文檔路徑"
         ↓
3. 段落式 Vibe Coding
   複製 Prompt 1 → 貼上給 AI → 實作完成
   複製 Prompt 2 → 貼上給 AI → 實作完成
   複製 Prompt 3 → 貼上給 AI → 實作完成
         ↓
4. 整合測試
   所有段落完成後的整體驗證
         ↓
5. 部署完成
   功能上線，文檔同步更新
```

### **實作操作指引**

#### **Step 1: 生成 prompt 檔案**
```bash
# 執行命令生成 prompt 檔案
/design2prompt "docs/my_project_execution_plan.md"

# 會生成：prompt_my_project.md
```

#### **Step 2: 段落式 Vibe Coding**
```markdown
1️⃣ 打開 prompt_my_project.md
2️⃣ 複製 Prompt 1 的完整內容
3️⃣ 貼上給 AI，開始第一段 vibing coding
4️⃣ 完成後，複製 Prompt 2 的內容
5️⃣ 繼續下一段 vibing coding
```

#### **Vibe Coding 技巧**
- **複製完整段落**: 確保複製整段 prompt 包含所有上下文
- **AI 理解確認**: 貼上後確認 AI 理解需求
- **逐步實作**: 跟著 AI 的節奏逐步完成功能
- **即時驗證**: 完成每段後立即測試功能
- **保持彈性**: 過程中有想法就與 AI 討論

#### **常見問題處理**
- **AI 模糊理解**: 補充更詳細的說明或參考原始設計
- **實作偏離**: 溫和提醒 AI 回到設計意圖
- **技術選型分歧**: 與 AI 討論不同方案的優劣
- **依賴問題**: 確保前一段完成再進行下一段

---

**🚨 強制要求**:
- 必須基於完整的设计文檔進行轉換
- **🏗️ 必須保持設計意圖**：確保 Vibe Prompt 準確傳達原始設計
- **🚨 對話友好格式**：使用自然語言，適合 AI 對話互動
- **🚨 實作導向內容**：包含足夠的技術細節指導實作
- **🚨 彈性保留原則**：保持適當的實作彈性和創意空間
- **🚨 功能完整性檢查**：每個 prompt 都是完整的功能單元
- **品質保證機制**：包含完整的檢查清單和驗證方式

**最後更新**: 2025-11-18
**文檔版本**: v1.0 - 初始版本
**核心特色**: 設計轉 Vibe Coding Prompt，支援段落式對話編程